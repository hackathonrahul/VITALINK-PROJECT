<!DOCTYPE html>
<html>
<head>
    <title>vitalink Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background: #F7F8FA; margin: 0; }
        .container { max-width: 400px; margin: 30px auto; background: #fff; padding: 20px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .user-icon { background: linear-gradient(135deg,#79D7D7,#247BC3); color: #fff; border-radius: 50%; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px; }
        .ai-chat-section { text-align: center; background: #FFF; border-radius: 12px; margin-bottom: 20px; padding: 20px 0 16px 0; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
        .ai-chat-title { font-size: 18px; color: #2f4159; font-weight: 600; margin-bottom: 9px; }
        .chat-bar-form { display: flex; justify-content: center; align-items: center; }
        .chat-input { width: 75%; padding: 9px 12px; border-radius: 8px; border: 1.5px solid #cbd5e1; font-size: 15px; margin-right: 8px; }
        .btn-chat { background: #3096f3; border: none; color: #fff; font-weight: 500; font-size: 15px; border-radius: 8px; padding: 9px 18px; cursor: pointer; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-bottom: 20px; }
        .menu-card { background: #FFF; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.07); display: flex; flex-direction: column; align-items: center; padding: 13px 0 10px 0; cursor: pointer; transition: box-shadow 0.1s; }
        .menu-card:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.12); }
        .menu-img { font-size: 30px; margin-bottom: 6px; }
        .menu-title { font-size: 15px; }
        .appointments-section { background: #FFF; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); padding: 17px 0; text-align: center; }
        .appt-title { color: #2979c7; font-weight: 600; font-size: 16px; margin-bottom: 6px; }
        .appt-list { color: #495C6B; font-size: 14px; text-align: left; margin: 0 auto; width: 85%; }
        .appointment-item { padding: 12px; margin-bottom: 10px; border-left: 4px solid #4CAF50; background: #f9f9f9; border-radius: 4px; }
        .appointment-item.doctor { border-left-color: #FF6B6B; }
        .appointment-item.wellness { border-left-color: #4CAF50; }
        .appointment-item-title { font-weight: 600; color: #333; margin-bottom: 5px; }
        .appointment-item-detail { color: #666; font-size: 14px; margin-bottom: 4px; }
        .appointment-item-date { color: #0066CC; font-size: 14px; font-weight: 600; }
        .appointment-empty { text-align: center; color: #999; padding: 15px; font-size: 14px; }
        .recent-activity { color: #495C6B; font-weight: 600; font-size: 18px; margin-top: 12px; margin-bottom: 2px; }
        .nav-bar { position: fixed; bottom: 0; left: 0; right: 0; background: #fff; display: flex; justify-content: space-around; border-top: 1px solid #EAEAEA; padding: 8px 0 5px 0; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: #1E4C8B; font-size: 21px; cursor: pointer; }
        .nav-label { font-size: 11px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <div style="font-size:20px; font-weight:600; color:#1C3453;">Hi, {{ current_user.name if current_user else 'User' }}</div>
                {% if current_user and current_user.email %}
                    <div style="font-size:12px; color:#6b7280;">{{ current_user.email }}</div>
                {% endif %}
            </div>
            <div style="text-align:right">
                <a href="{{ url_for('profile') }}" style="text-decoration:none; color:inherit">
                    <div class="user-icon">{{ (current_user.name[0] if current_user and current_user.name) | upper }}</div>
                </a>
                {% if current_user %}
                    <div style="font-size:12px; margin-top:6px;"><a href="{{ url_for('logout') }}">Logout</a></div>
                {% endif %}
            </div>
        </div>
        <!-- AI CHAT SECTION -->
        <div class="ai-chat-section">
            <div class="ai-chat-title">Search Health Info & Chat with AI</div>
            <form method="post" action="{{ url_for('chat_ai') }}" class="chat-bar-form">
                <input class="chat-input" type="text" name="user_input" placeholder="Type a symptom or health query..." required>
                <button class="btn-chat" type="submit">Ask</button>
            </form>
        </div>
        <div class="grid">
            <a href="{{ url_for('bookdoctor') }}" style="text-decoration:none">
                <div class="menu-card">
                    <div class="menu-img">üë®‚Äç‚öïÔ∏è</div>
                    <div class="menu-title">Book Doctor</div>
                </div>
            </a>
            <a href="{{ url_for('wellnessclasses') }}" style="text-decoration:none">
                <div class="menu-card">
                    <div class="menu-img">üßò</div>
                    <div class="menu-title">Wellness Classes</div>
                </div>
            </a>
            <a href="{{ url_for('health_report') }}" style="text-decoration:none">
                <div class="menu-card">
                    <div class="menu-img">üìã</div>
                    <div class="menu-title">Health Report</div>
                </div>
            </a>
            <a href="{{ url_for('chat') }}" style="text-decoration:none">
                <div class="menu-card">
                    <div class="menu-img">üí¨</div>
                    <div class="menu-title">Symptom Chat</div>
                </div>
            </a>
            <a href="{{ url_for('wellness') }}" style="text-decoration:none">
                <div class="menu-card">
                    <div class="menu-img">üèãÔ∏è</div>
                    <div class="menu-title">Wellness Hub</div>
                </div>
            </a>
            <a href="{{ url_for('appointment') }}" style="text-decoration:none">
                <div class="menu-card">
                    <div class="menu-img">üìÖ</div>
                    <div class="menu-title">My Appointments</div>
                </div>
            </a>
        </div>
        <!-- APPOINTMENTS AREA BELOW WELLNESS CLASSES -->
        <div class="appointments-section">
            <div class="appt-title">My Appointments</div>
            <div class="appt-list">
                {% if my_appointments and my_appointments|length > 0 %}
                    {% for appointment in my_appointments %}
                        {% if appointment.type == 'doctor' %}
                            <div class="appointment-item doctor">
                                <div class="appointment-item-title">üë®‚Äç‚öïÔ∏è Doctor Appointment</div>
                                <div class="appointment-item-detail">Name: {{ appointment.name }}</div>
                                <div class="appointment-item-detail">Reason: {{ appointment.reason }}</div>
                                <div class="appointment-item-date">üìÖ {{ appointment.date }} ({{ appointment.day }})</div>
                            </div>
                        {% elif appointment.type == 'wellness' %}
                            <div class="appointment-item wellness">
                                <div class="appointment-item-title">üßò {{ appointment.class_name }}</div>
                                <div class="appointment-item-detail">Name: {{ appointment.name }}</div>
                                <div class="appointment-item-date">üìÖ {{ appointment.date }} ({{ appointment.day }})</div>
                            </div>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <div class="appointment-empty">No appointments yet. Book one to get started!</div>
                {% endif %}
            </div>
        </div>

        {% if current_user and current_user.id == 'admin' and other_appointments and other_appointments|length > 0 %}
            <!-- ADMIN VIEW: Show all other appointments -->
            <div class="appointments-section" style="opacity: 0.85; border-left: 4px solid #999;">
                <div class="appt-title" style="color: #666;">All Other Appointments</div>
                <div class="appt-list">
                    {% for appointment in other_appointments %}
                        {% if appointment.type == 'doctor' %}
                            <div class="appointment-item doctor">
                                <div class="appointment-item-title">üë®‚Äç‚öïÔ∏è Doctor Appointment</div>
                                <div class="appointment-item-detail">Name: {{ appointment.name }}</div>
                                <div class="appointment-item-detail">Reason: {{ appointment.reason }}</div>
                                <div class="appointment-item-date">üìÖ {{ appointment.date }} ({{ appointment.day }})</div>
                            </div>
                        {% elif appointment.type == 'wellness' %}
                            <div class="appointment-item wellness">
                                <div class="appointment-item-title">üßò {{ appointment.class_name }}</div>
                                <div class="appointment-item-detail">Name: {{ appointment.name }}</div>
                                <div class="appointment-item-date">üìÖ {{ appointment.date }} ({{ appointment.day }})</div>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}
        </div>
        <div class="recent-activity">
            Recent Activity
        </div>
    </div>
    <div class="nav-bar">
        <a class="nav-item" href="{{ url_for('dashboard') }}">
            <span>üè°</span>
            <div class="nav-label">Home</div>
        </a>
        <a class="nav-item" href="{{ url_for('chat') }}">
            <span>üí¨</span>
            <div class="nav-label">Chat</div>
        </a>
        <a class="nav-item" href="{{ url_for('wellness') }}">
            <span>üßò</span>
            <div class="nav-label">Wellness</div>
        </a>
        <a class="nav-item" href="{{ url_for('profile') }}">
            <span>üë§</span>
            <div class="nav-label">Profile</div>
        </a>
    </div>
</body>
</html>

